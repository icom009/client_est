===============================================
  강의장 녹화 자동 업로드 - 설치 가이드
===============================================


[필수 소프트웨어 설치]
===============================================

1. OBS Studio (녹화 프로그램)
-----------------------------------------------
   다운로드: https://obsproject.com/download

   - "Windows" 선택 후 다운로드
   - 설치 파일 실행 (관리자 권한)
   - 기본 옵션으로 설치 진행
   - 설치 후 OBS_설정가이드.txt 참고하여 설정


2. 업로드 클라이언트 (자동 설치)
-----------------------------------------------
   install.bat 실행 시 자동으로 설치되는 항목:

   - Miniconda (Python 환경)
   - Python 패키지 (requests, pyyaml)
   - rclone (파일 전송 도구)

   ※ 별도 설치 필요 없음!


[설치 순서]
===============================================

1단계: OBS Studio 설치
-----------------------------------------------
   1) https://obsproject.com/download 접속
   2) Windows 버전 다운로드
   3) 설치 파일 실행
   4) "다음" 클릭하며 설치 완료
   5) 바탕화면에 OBS Studio 아이콘 확인


2단계: 녹화 폴더 생성
-----------------------------------------------
   1) 파일 탐색기 열기
   2) C: 드라이브로 이동
   3) 새 폴더 만들기: record
   4) 새 폴더 만들기: record_save

   결과:
   - C:\record       (녹화 파일 저장)
   - C:\record_save  (업로드 완료 파일)


3단계: OBS 설정
-----------------------------------------------
   1) OBS Studio 실행
   2) OBS_설정가이드.txt 참고하여 설정
   3) 핵심 설정:
      - 설정 > 출력 > 녹화 경로: C:\record
      - 설정 > 출력 > 녹화 형식: mp4
   4) 테스트 녹화 진행


4단계: 업로드 클라이언트 설치
-----------------------------------------------
   1) 이 폴더를 C:\lms_client\ 에 복사
   2) install.bat 우클릭 > "관리자 권한으로 실행"
   3) 설치 마법사 안내에 따라 진행:
      - [1-3] 자동 설치 (Miniconda, Python, rclone)
      - [4] 서버 연결 설정 (강의장 이름 입력)
      - [5] WebDAV 설정 (클라우드 계정 정보 입력)
      - [6] 작업 스케줄러 등록


5단계: 설치 확인
-----------------------------------------------
   1) C:\record 폴더에 테스트 녹화 파일 확인
   2) run_upload.bat 실행하여 업로드 테스트
   3) 업로드 후 C:\record_save 폴더에 파일 이동 확인


[폴더 구조]
===============================================

C:\
├── record\              ← OBS 녹화 파일 저장
├── record_save\         ← 업로드 완료 파일
└── lms_client\          ← 업로드 클라이언트
    ├── install.bat      ← 설치 프로그램
    ├── run_upload.bat   ← 수동 업로드
    ├── config.yaml      ← 설정 파일
    ├── logs\            ← 로그 폴더
    └── ...


[자동 업로드 동작]
===============================================

설치 완료 후 자동 동작:

- 평일(월~금) 오후 7시, 9시, 11시에 자동 실행
- C:\record 폴더의 새 녹화 파일 감지
- 서버로 업로드
- 업로드 완료 파일은 C:\record_save로 이동

※ 수동 업로드: run_upload.bat 더블클릭


[파일 설명]
===============================================

install.bat          - 통합 설치 (이것만 실행!)
setup.bat            - 환경 설치 (자동 호출)
setup_rclone.bat     - WebDAV 설정 (자동 호출)
register_task.bat    - 작업 스케줄러 등록 (자동 호출)

run_init.bat         - 서버 연결 재설정
run_upload.bat       - 수동 업로드 (대화형)
run_upload_auto.bat  - 자동 업로드 (스케줄러용)

OBS_설정가이드.txt   - OBS 상세 설정 안내
config.yaml          - 설정 파일 (설치 후 생성)


[문제 해결]
===============================================

Q: OBS 녹화가 안됨
A: OBS_설정가이드.txt의 "문제 해결" 참고

Q: "관리자 권한으로 실행해주세요" 오류
A: install.bat 우클릭 > "관리자 권한으로 실행"

Q: 서버 연결 실패
A: 1) 네트워크 연결 확인
   2) 서버 URL 확인 (https://mp.smhrd.or.kr)
   3) run_init.bat 다시 실행

Q: 업로드가 안됨
A: 1) C:\record 폴더에 파일 있는지 확인
   2) 파일이 1분 이상 된 파일인지 확인 (쓰기 중 파일 제외)
   3) logs 폴더의 로그 확인

Q: 자동 업로드가 안됨
A: 1) 작업 스케줄러 확인 (taskschd.msc)
   2) "LMS_녹화파일_자동업로드" 작업 상태 확인
   3) PC가 켜져 있어야 함


[담당자]
===============================================

관리 서버: https://mp.smhrd.or.kr/lmsweb/
문의: IT 관리팀


===============================================
